# `gs.c` = A single C file Gaussian Splatting renderer

This project is an accurate(to the best of my knowledge) implementation of the [Gaussian Splatting](https://repo-sam.inria.fr/fungraph/3d-gaussian-splatting/) project's rendering pipeline. I wrote this program to learn both `C` and `GS` from scratch. Inspired by [Karpathy's llm.c](https://github.com/karpathy/llm.c), I wrote it in a single C file with no external dependency. Just use the `-lm` math flag while compiling. 

## Results
- Sample image generated by `gs.c`

![Bicycle pre-trained from official implementation](./sample.png)

## Requirements
- C compiler (`gcc`)
- ImageMagick
- Python

## How to run
- Download the trained dataset from the project's page [(Here - Pre-trained model - 14GB)](https://repo-sam.inria.fr/fungraph/3d-gaussian-splatting/datasets/pretrained/models.zip) or train a scene yourself. 
- Copy two files from the output into to root of the repo - `point_cloud.ply` and `cameras.json`
- You can use the `run.sh` script. You can also manually compile and run it. 
- The final render is the file `render_gs_c.png`
```bash
git clone https://github.com/0x536b/gs.c.git
cd gs.c
cp <pre-trained-scene-path>/point_cloud/iteration_30000/point_cloud.ply test.ply
cp <pre-trained-scene-path>/cameras.json .
python convert_json.py
chmod +x run.sh # might be required
./run.sh
```
- You can edit the following lines in `gs.c`
```c
// change 10 to different view. This num is the image ID in the cameras.json or the dataset
#define TEST_IMG_ID 10 

// change to 2, 4, 8 depending on your views in cameras.json.
// if you get seg fault, change to a higher level, e.g. 2 to 4 or 4 to 8
#define TEST_IMG_SCALE 4


// change this line to match the .ply file in the root.
file = fopen("test.ply", "r");
```
## References
- [Official Implementation by the GS authors](https://github.com/graphdeco-inria/gaussian-splatting/tree/main)
- [hbb1/torch-splatting](https://github.com/hbb1/torch-splatting)
- [MrNeRF's C++/CUDA implementation](https://github.com/MrNeRF/gaussian-splatting-cuda)
- [NeRF studio's gsplat](https://github.com/nerfstudio-project/gsplat/tree/bbc9e98fa9add8b355b91b69096ec3b1271a9f46)
- [you will never ask about pointers again after watching this video](https://www.youtube.com/watch?v=2ybLD6_2gKM)
- [OpenSplat](https://github.com/pierotofy/OpenSplat/blob/main/rasterizer/gsplat-cpu/gsplat_cpu.cpp)

## TODO
- [ ] Port to pthreads or openMP for multithreading
- [ ] Remove debugging code
- [ ] Add metrics (mine vs official implementation vs ground truth)

## DISCLAIMER/WARRANTY
I give no warranty for this repo. Be precausious and use it. It might break your computer and Im not responsible for it. This repo is meant for research purposes only. Im a beginner C programmer, so this repo might not be the best memory-safe efficient code. Im still learning. I humbly accept any mistakes and stupidity in the code. Im open to pull requests and suggestions. I will take time to implement/merge as Im also a full time student and I need to understand your suggestions completely before adding them.